[{"permalink":"//","layout":"default","title":"OpenUxAS","content":"# OpenUxAS\n\nThe Unmanned Systems Autonomy Services (UxAS) is a service-oriented software framework for mission-level autonomy for teams of unmanned vehicles. Though its primary focus is unmanned air vehicles, the \"x\" in the name indicates support for other types of unmanned systems. UxAS was developed at the Air Force Research Laboratory (AFRL) based on over 10 years of flight testing, and portions of UxAS are available open source on GitHub as OpenUxAS. \n\n## An Example\n\nA common use case for OpenUxAS is to optimally distribute surveillance tasks across a team of unmanned air vehicles (UAVs). The goal of a UAV surveillance task is to sweep the sensor footprint of a UAV over a point, line, or the entirety of an area, possibly with task-dependent constraints on factors such as desired ground sample distance, angle of approach, view angle, standoff distance, and which UAVs are eligible to perform which tasks. Most of the time, tasks are underconstrained so that there are many options for how they can be carried out. \n\n\n\n","dir":"/","name":"README.md","path":"README.md","url":"/"},{"order":3,"layout":"default","title":"Contributing","content":"<h1 id=\"contributing\">Contributing</h1>\n<h2 id=\"github-workflow\">GitHub Workflow</h2>\n<h2 id=\"standards-and-conventions\">Standards and Conventions</h2>\n<h2 id=\"continuous-integration\">Continuous Integration</h2>\n<h3 id=\"build-process\">Build process</h3>\n<h3 id=\"proof\">Proof</h3>\n","dir":"/documentation/","name":"contributing.md","path":"documentation/contributing.md","url":"/documentation/contributing.html"},{"order":3,"layout":"default","title":"Installation","content":"# Installation\n\n## Using anod\n\n## Manually\n","dir":"/documentation/","name":"installation.md","path":"documentation/installation.md","url":"/documentation/installation.html"},{"order":1,"layout":"default","title":"Introduction","content":"# Introduction\n\n## Purpose\n\n## Design Principles\n\n","dir":"/documentation/","name":"introduction.md","path":"documentation/introduction.md","url":"/documentation/introduction.html"},{"order":2,"layout":"default","title":"Supporting Software","content":"# Supporting Software\n\n## External Applications\n\n## C++ 3rd Party Dependencies\n","dir":"/documentation/","name":"supportingSoftware.md","path":"documentation/supportingSoftware.md","url":"/documentation/supportingSoftware.html"},{"order":1,"layout":"default","title":"Creating a general service in C++","content":"<h1 id=\"creating-a-general-service-in-c\">Creating a general service in C++</h1>\n\n<p>Broadly speaking, development of a new service in any language requires considering:</p>\n<ul>\n <li>What types of messages it subscribes to</li>\n <li>What computations it should do when it receives a subscribed message</li>\n <li>What messages (if any) it should publish in response</li>\n <li>Where it should save files (if any)</li>\n</ul>\n\n<p>Since OpenUxAS is written in C++, you’ll generally want to compile a new service written in C++ as part of the main executable. When you run the OpenUxAS executable, you specify in an XML configuration file 1) which services you want to load and 2) values for any service-specific parameters. This XML configuration file is passed to the UxAS executable as a command line argument. This means that for services written in C++ and compiled as part of the main executable, you also need to consider:</p>\n<ul>\n <li>What configurable parameters the service has</li>\n <li>What the format of its XML configuration element</li>\n</ul>\n\n<h2 id=\"basic-steps\">Basic steps</h2>\n\n<p>OpenUxAS includes a template header file <code class=\"language-plaintext highlighter-rouge\">00_ServiceTemplate.h</code> and source file <code class=\"language-plaintext highlighter-rouge\">00_ServiceTemplate.cpp</code> for general services in C++. If <code class=\"language-plaintext highlighter-rouge\">{UxAS_ROOT}</code> is your main OpenUxAS directory, then these files are located in directory <code class=\"language-plaintext highlighter-rouge\">{UXAS_ROOT}/src/cpp/Services</code>.</p>\n\n<p>In general, creating a new non-task service consists of the following steps:</p>\n\n<ol>\n <li>Choose a name <code class=\"language-plaintext highlighter-rouge\">{ServiceName}</code> for your service</li>\n <li>In directory <code class=\"language-plaintext highlighter-rouge\">{UxAS_ROOT}/src/cpp/Services</code>, copy <code class=\"language-plaintext highlighter-rouge\">00_ServiceTemplate.h</code> to <code class=\"language-plaintext highlighter-rouge\">{ServiceName}.h</code> and <code class=\"language-plaintext highlighter-rouge\">00_ServiceTemplate.cpp</code> to <code class=\"language-plaintext highlighter-rouge\">{ServiceName}.cpp</code></li>\n <li>In both <code class=\"language-plaintext highlighter-rouge\">{ServiceName}.h</code> and <code class=\"language-plaintext highlighter-rouge\">{ServiceName}.cpp</code>,\n <ol>\n <li>Change all instances of the string <code class=\"language-plaintext highlighter-rouge\">00_ServiceTemplate</code> to <code class=\"language-plaintext highlighter-rouge\">{ServiceName}</code></li>\n <li>Refine the <code class=\"language-plaintext highlighter-rouge\">namespace</code> (if desired)</li>\n </ol>\n </li>\n <li>In header file <code class=\"language-plaintext highlighter-rouge\">{ServiceName}.h</code>:\n <ol>\n <li>Change the header guard string <code class=\"language-plaintext highlighter-rouge\">UXAS_00_SERVICE_TEMPLATE_H</code> to a unique string appropriate for the new service, e.g. <code class=\"language-plaintext highlighter-rouge\">UXAS_{SERVICE_NAME}_H</code></li>\n <li>If you expect the service to generate output files, update function <code class=\"language-plaintext highlighter-rouge\">s_directoryName()</code> to return an appropriate directory name</li>\n <li>Add <code class=\"language-plaintext highlighter-rouge\">#include</code> directives for any necessary header files</li>\n <li>Declare any necessary private member data and functions</li>\n <li>Update the doxygen comments</li>\n </ol>\n </li>\n <li>In source file <code class=\"language-plaintext highlighter-rouge\">{ServiceName}.cpp</code>:\n <ol>\n <li>Update the logic of the member function <code class=\"language-plaintext highlighter-rouge\">configure</code></li>\n <li>Add <code class=\"language-plaintext highlighter-rouge\">#include</code> directives for any published or subscribed messages</li>\n <li>Add <code class=\"language-plaintext highlighter-rouge\">#include</code> directives for any other necessary header files</li>\n <li>Update the logic for member function <code class=\"language-plaintext highlighter-rouge\">processLmcpMessage</code> to handle different types of subscribed message types</li>\n <li>Define any necessary private member functions</li>\n </ol>\n </li>\n <li>Modify the build process to include any 3rd party dependencies</li>\n <li>Create and run an example to exercise the service</li>\n</ol>\n\n<h2 id=\"an-example-c-service\">An example C++ service</h2>\n\n<p>Suppose we want to create a service called <code class=\"language-plaintext highlighter-rouge\">JsonAirVehicleLoggerService</code> that receives <code class=\"language-plaintext highlighter-rouge\">AirVehicleState</code> messages, converts portions of them to JSON format, and saves them to a file. More specifically, we’d like to specify 1) the name of the output file, 2) the IDs of air vehicles whose messages should be converted and saved, 3) the level of message content per vehicle to be converted and saved. We’d also like the service to publish a <code class=\"language-plaintext highlighter-rouge\">KeyValuePair</code> message that reports the value of the ID of each vehicle the first time it is seen.</p>\n\n<p>We decide that the XML configuration element for our service should look something like this:</p>\n<div class=\"language-xml highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"nt\">&lt;Service</span> <span class=\"na\">Type=</span><span class=\"s\">\"JsonAirVehicleLoggerService\"</span> <span class=\"na\">Filename=</span><span class=\"s\">\"myOutputFile.txt\"</span><span class=\"nt\">&gt;</span>\n   <span class=\"nt\">&lt;AirVehicle</span> <span class=\"na\">VehicleID=</span><span class=\"s\">\"10\"</span> <span class=\"na\">Level=</span><span class=\"s\">\"0\"</span><span class=\"nt\">/&gt;</span>\n   <span class=\"nt\">&lt;AirVehicle</span> <span class=\"na\">VehicleID=</span><span class=\"s\">\"11\"</span> <span class=\"na\">Level=</span><span class=\"s\">\"1\"</span><span class=\"nt\">/&gt;</span>\n   <span class=\"nt\">&lt;AirVehicle</span> <span class=\"na\">VehicleID=</span><span class=\"s\">\"12\"</span> <span class=\"na\">Level=</span><span class=\"s\">\"2\"</span><span class=\"nt\">/&gt;</span>\n <span class=\"nt\">&lt;/Service&gt;</span>\n</code></pre>  </div></div>\n\n<p>We also decide that the different reporting levels should save the following message fields:</p>\n\n<table>\n <thead>\n <tr>\n <th>Level</th>\n <th>Fields</th>\n </tr>\n </thead>\n <tbody>\n <tr>\n <td>0</td>\n <td>ID, Time, Latitude, Longitude</td>\n </tr>\n <tr>\n <td>1</td>\n <td>ID, Time, Latitude, Longitude, Heading, Groundspeed, Airspeed, VerticalSpeed</td>\n </tr>\n <tr>\n <td>2+</td>\n <td>ID, Time, Latitude, Longitude, Heading, Groundspeed, Airspeed, VerticalSpeed, EnergyAvailable, ActualEnergyRate</td>\n </tr>\n </tbody>\n</table>\n\n<h2 id=\"creating-the-example-c-service\">Creating the example C++ service</h2>\n\n<p>After copying the template file and going through the basic steps above, we end up with the following header file</p>\n\n<div class=\"language-cpp highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"cm\">/* \n * File:   JsonAirVehicleLoggerService.h\n * Author: lhumphrey\n *\n * Created on Mar 12, 2021\n */</span>\n\n<span class=\"cp\">#ifndef UXAS_JSON_AIR_VEHICLE_LOGGER_SERVICE_H\n#define UXAS_JSON_AIR_VEHICLE_LOGGER_SERVICE_H\n</span>\n<span class=\"cp\">#include &lt;nlohmann/json.hpp&gt;\n</span>\n<span class=\"cp\">#include \"ServiceBase.h\"\n#include \"CallbackTimer.h\"\n#include \"TypeDefs/UxAS_TypeDefs_Timer.h\"\n</span>\n<span class=\"cp\">#include &lt;cstdint&gt;\n#include &lt;fstream&gt;\n</span>\n<span class=\"k\">namespace</span> <span class=\"n\">uxas</span>\n<span class=\"p\">{</span>\n<span class=\"k\">namespace</span> <span class=\"n\">service</span>\n<span class=\"p\">{</span>\n<span class=\"k\">namespace</span> <span class=\"n\">data</span>\n<span class=\"p\">{</span>\n\n<span class=\"cm\">/*! \\class JsonAirVehicleLoggerService\n    \\brief This service saves fields of AirVehicleState messages in JSON format.\n\n * For each ID-specified air vehicle, save certain fields of corresponding\n * AirVehicleState messages depending on reporting level: 0-, 1, or 2+.\n * \n * Example Configuration Element: \n * &lt;Service Type=\"JsonAirVehicleLoggerService\" Filename=\"myOutput.txt\"&gt;\n *   &lt;AirVehicle ID=\"3\" Level=\"0\"/&gt;\n *   &lt;AirVehicle ID=\"4\" Level=\"0\"/&gt;\n *   &lt;AirVehicle ID=\"5\" Level=\"1\"/&gt;\n *   &lt;AirVehicle ID=\"6\" Level=\"2\"/&gt;\n * &lt;/Service&gt;\n *   \n * Options:\n *  - Filename - Name of the file in which to log results\n *  - - ID - The ID number of the air vehicle\n *  - - Level - The level of information to report: \"0\", \"1\", or \"2\"\n * \n * Subscribed Messages:\n *  - afrl::cmasi::AirVehicleState\n * \n * Sent Messages:\n *  - afrl::cmasi::KeyValuePair\n * \n */</span>\n\n<span class=\"k\">class</span> <span class=\"nc\">JsonAirVehicleLoggerService</span> <span class=\"o\">:</span> <span class=\"k\">public</span> <span class=\"n\">ServiceBase</span>\n<span class=\"p\">{</span>\n<span class=\"nl\">public:</span>\n\n    <span class=\"k\">static</span> <span class=\"k\">const</span> <span class=\"n\">std</span><span class=\"o\">::</span><span class=\"n\">string</span><span class=\"o\">&amp;</span>\n    <span class=\"n\">s_typeName</span><span class=\"p\">()</span>\n    <span class=\"p\">{</span>\n        <span class=\"k\">static</span> <span class=\"n\">std</span><span class=\"o\">::</span><span class=\"n\">string</span> <span class=\"n\">s_string</span><span class=\"p\">(</span><span class=\"s\">\"JsonAirVehicleLoggerService\"</span><span class=\"p\">);</span>\n        <span class=\"k\">return</span> <span class=\"p\">(</span><span class=\"n\">s_string</span><span class=\"p\">);</span>\n    <span class=\"p\">};</span>\n\n    <span class=\"k\">static</span> <span class=\"k\">const</span> <span class=\"n\">std</span><span class=\"o\">::</span><span class=\"n\">vector</span><span class=\"o\">&lt;</span><span class=\"n\">std</span><span class=\"o\">::</span><span class=\"n\">string</span><span class=\"o\">&gt;</span>\n    <span class=\"n\">s_registryServiceTypeNames</span><span class=\"p\">()</span>\n    <span class=\"p\">{</span>\n        <span class=\"n\">std</span><span class=\"o\">::</span><span class=\"n\">vector</span><span class=\"o\">&lt;</span><span class=\"n\">std</span><span class=\"o\">::</span><span class=\"n\">string</span><span class=\"o\">&gt;</span> <span class=\"n\">registryServiceTypeNames</span> <span class=\"o\">=</span> <span class=\"p\">{</span><span class=\"n\">s_typeName</span><span class=\"p\">()};</span>\n        <span class=\"k\">return</span> <span class=\"p\">(</span><span class=\"n\">registryServiceTypeNames</span><span class=\"p\">);</span>\n    <span class=\"p\">};</span>\n\n    <span class=\"c1\">// Define name of directory in which output file will be stored</span>\n    <span class=\"k\">static</span> <span class=\"k\">const</span> <span class=\"n\">std</span><span class=\"o\">::</span><span class=\"n\">string</span><span class=\"o\">&amp;</span>\n    <span class=\"n\">s_directoryName</span><span class=\"p\">()</span> <span class=\"p\">{</span> <span class=\"k\">static</span> <span class=\"n\">std</span><span class=\"o\">::</span><span class=\"n\">string</span> <span class=\"n\">s_string</span><span class=\"p\">(</span><span class=\"s\">\"JsonAirVehicleLogs\"</span><span class=\"p\">);</span> <span class=\"k\">return</span> <span class=\"p\">(</span><span class=\"n\">s_string</span><span class=\"p\">);</span> <span class=\"p\">};</span>\n\n    <span class=\"k\">static</span> <span class=\"n\">ServiceBase</span><span class=\"o\">*</span>\n    <span class=\"n\">create</span><span class=\"p\">()</span>\n    <span class=\"p\">{</span>\n        <span class=\"k\">return</span> <span class=\"k\">new</span> <span class=\"n\">JsonAirVehicleLoggerService</span><span class=\"p\">;</span>\n    <span class=\"p\">};</span>\n\n    <span class=\"n\">JsonAirVehicleLoggerService</span><span class=\"p\">();</span>\n\n    <span class=\"k\">virtual</span>\n    <span class=\"o\">~</span><span class=\"n\">JsonAirVehicleLoggerService</span><span class=\"p\">();</span>\n\n<span class=\"nl\">private:</span>\n\n    <span class=\"k\">static</span>\n    <span class=\"n\">ServiceBase</span><span class=\"o\">::</span><span class=\"n\">CreationRegistrar</span><span class=\"o\">&lt;</span><span class=\"n\">JsonAirVehicleLoggerService</span><span class=\"o\">&gt;</span> <span class=\"n\">s_registrar</span><span class=\"p\">;</span>\n\n    <span class=\"cm\">/** brief Copy construction not permitted */</span>\n    <span class=\"n\">JsonAirVehicleLoggerService</span><span class=\"p\">(</span><span class=\"n\">JsonAirVehicleLoggerService</span> <span class=\"k\">const</span><span class=\"o\">&amp;</span><span class=\"p\">)</span> <span class=\"o\">=</span> <span class=\"k\">delete</span><span class=\"p\">;</span>\n\n    <span class=\"cm\">/** brief Copy assignment operation not permitted */</span>\n    <span class=\"kt\">void</span> <span class=\"k\">operator</span><span class=\"o\">=</span><span class=\"p\">(</span><span class=\"n\">JsonAirVehicleLoggerService</span> <span class=\"k\">const</span><span class=\"o\">&amp;</span><span class=\"p\">)</span> <span class=\"o\">=</span> <span class=\"k\">delete</span><span class=\"p\">;</span>\n\n    <span class=\"kt\">bool</span>\n    <span class=\"n\">configure</span><span class=\"p\">(</span><span class=\"k\">const</span> <span class=\"n\">pugi</span><span class=\"o\">::</span><span class=\"n\">xml_node</span><span class=\"o\">&amp;</span> <span class=\"n\">serviceXmlNode</span><span class=\"p\">)</span> <span class=\"k\">override</span><span class=\"p\">;</span>\n\n    <span class=\"kt\">bool</span>\n    <span class=\"n\">initialize</span><span class=\"p\">()</span> <span class=\"k\">override</span><span class=\"p\">;</span>\n\n    <span class=\"kt\">bool</span>\n    <span class=\"n\">start</span><span class=\"p\">()</span> <span class=\"k\">override</span><span class=\"p\">;</span>\n\n    <span class=\"kt\">bool</span>\n    <span class=\"n\">terminate</span><span class=\"p\">()</span> <span class=\"k\">override</span><span class=\"p\">;</span>\n\n    <span class=\"kt\">bool</span>\n    <span class=\"n\">processReceivedLmcpMessage</span><span class=\"p\">(</span><span class=\"n\">std</span><span class=\"o\">::</span><span class=\"n\">unique_ptr</span><span class=\"o\">&lt;</span><span class=\"n\">uxas</span><span class=\"o\">::</span><span class=\"n\">communications</span><span class=\"o\">::</span><span class=\"n\">data</span><span class=\"o\">::</span><span class=\"n\">LmcpMessage</span><span class=\"o\">&gt;</span> <span class=\"n\">receivedLmcpMessage</span><span class=\"p\">)</span> <span class=\"k\">override</span><span class=\"p\">;</span>\n\n\n<span class=\"nl\">private:</span>\n\n    <span class=\"c1\">// Member variables to store output filename, a map of ID numbers to report Level based</span>\n    <span class=\"c1\">// on sevice configuration element, and the set of ID numbers seen during execution</span>\n    <span class=\"n\">std</span><span class=\"o\">::</span><span class=\"n\">string</span> <span class=\"n\">m_outputFilename</span> <span class=\"o\">=</span> <span class=\"n\">std</span><span class=\"o\">::</span><span class=\"n\">string</span><span class=\"p\">(</span><span class=\"s\">\"output.txt\"</span><span class=\"p\">);</span>\n    <span class=\"n\">std</span><span class=\"o\">::</span><span class=\"n\">unordered_map</span><span class=\"o\">&lt;</span><span class=\"kt\">int64_t</span><span class=\"p\">,</span> <span class=\"kt\">int64_t</span><span class=\"o\">&gt;</span> <span class=\"n\">m_idToLevel</span><span class=\"p\">;</span>\n    <span class=\"n\">std</span><span class=\"o\">::</span><span class=\"n\">unordered_set</span><span class=\"o\">&lt;</span><span class=\"kt\">int64_t</span><span class=\"o\">&gt;</span> <span class=\"n\">m_seenIds</span><span class=\"p\">;</span>\n<span class=\"p\">};</span>\n\n<span class=\"p\">};</span> <span class=\"c1\">//namespace data</span>\n<span class=\"p\">};</span> <span class=\"c1\">//namespace service</span>\n<span class=\"p\">};</span> <span class=\"c1\">//namespace uxas</span>\n\n<span class=\"cp\">#endif </span><span class=\"cm\">/* UXAS_JSON_AIR_VEHICLE_LOGGER_SERVICE_H */</span><span class=\"cp\">\n</span>\n</code></pre>  </div></div>\n\n<p>and the following source file</p>\n<div class=\"language-cpp highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"cm\">/* \n * File:   JsonAirVehicleLoggerService.cpp\n * Author: lhumphrey\n *\n */</span>\n\n<span class=\"cp\">#include \"JsonAirVehicleLoggerService.h\"\n</span>\n<span class=\"cp\">#include \"afrl/cmasi/KeyValuePair.h\"\n#include \"afrl/cmasi/AirVehicleState.h\"\n</span>\n<span class=\"cp\">#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;string&gt;\n</span>\n<span class=\"cp\">#define STRING_XML_FILENAME \"Filename\"\n#define STRING_XML_VEHICLE \"AirVehicle\"\n#define STRING_XML_ID \"ID\"\n#define STRING_XML_LEVEL \"Level\"\n</span>\n<span class=\"k\">namespace</span> <span class=\"n\">uxas</span>\n<span class=\"p\">{</span>\n<span class=\"k\">namespace</span> <span class=\"n\">service</span>\n<span class=\"p\">{</span>\n<span class=\"k\">namespace</span> <span class=\"n\">data</span>\n<span class=\"p\">{</span>\n\n<span class=\"n\">JsonAirVehicleLoggerService</span><span class=\"o\">::</span><span class=\"n\">ServiceBase</span><span class=\"o\">::</span><span class=\"n\">CreationRegistrar</span><span class=\"o\">&lt;</span><span class=\"n\">JsonAirVehicleLoggerService</span><span class=\"o\">&gt;</span>\n<span class=\"n\">JsonAirVehicleLoggerService</span><span class=\"o\">::</span><span class=\"n\">s_registrar</span><span class=\"p\">(</span><span class=\"n\">JsonAirVehicleLoggerService</span><span class=\"o\">::</span><span class=\"n\">s_registryServiceTypeNames</span><span class=\"p\">());</span>\n\n<span class=\"n\">JsonAirVehicleLoggerService</span><span class=\"o\">::</span><span class=\"n\">JsonAirVehicleLoggerService</span><span class=\"p\">()</span>\n<span class=\"o\">:</span> <span class=\"n\">ServiceBase</span><span class=\"p\">(</span><span class=\"n\">JsonAirVehicleLoggerService</span><span class=\"o\">::</span><span class=\"n\">s_typeName</span><span class=\"p\">(),</span> <span class=\"n\">JsonAirVehicleLoggerService</span><span class=\"o\">::</span><span class=\"n\">s_directoryName</span><span class=\"p\">())</span> <span class=\"p\">{</span> <span class=\"p\">};</span>\n\n<span class=\"n\">JsonAirVehicleLoggerService</span><span class=\"o\">::~</span><span class=\"n\">JsonAirVehicleLoggerService</span><span class=\"p\">()</span> <span class=\"p\">{</span> <span class=\"p\">};</span>\n\n<span class=\"kt\">bool</span> <span class=\"n\">JsonAirVehicleLoggerService</span><span class=\"o\">::</span><span class=\"n\">configure</span><span class=\"p\">(</span><span class=\"k\">const</span> <span class=\"n\">pugi</span><span class=\"o\">::</span><span class=\"n\">xml_node</span><span class=\"o\">&amp;</span> <span class=\"n\">serviceXmlNode</span><span class=\"p\">)</span>\n<span class=\"p\">{</span>\n    <span class=\"kt\">bool</span> <span class=\"n\">isSuccess</span><span class=\"p\">(</span><span class=\"nb\">true</span><span class=\"p\">);</span>\n\n    <span class=\"c1\">// Get and save the Filename attribute (if specified)</span>\n    <span class=\"k\">if</span> <span class=\"p\">(</span><span class=\"o\">!</span><span class=\"n\">serviceXmlNode</span><span class=\"p\">.</span><span class=\"n\">attribute</span><span class=\"p\">(</span><span class=\"n\">STRING_XML_FILENAME</span><span class=\"p\">).</span><span class=\"n\">empty</span><span class=\"p\">())</span>\n    <span class=\"p\">{</span>\n        <span class=\"n\">m_outputFilename</span> <span class=\"o\">=</span> <span class=\"n\">serviceXmlNode</span><span class=\"p\">.</span><span class=\"n\">attribute</span><span class=\"p\">(</span><span class=\"n\">STRING_XML_FILENAME</span><span class=\"p\">).</span><span class=\"n\">value</span><span class=\"p\">();</span>\n    <span class=\"p\">}</span>\n\n    <span class=\"c1\">// Get and save the ID and Level attributes for each AirVehicle</span>\n    <span class=\"k\">for</span> <span class=\"p\">(</span><span class=\"n\">pugi</span><span class=\"o\">::</span><span class=\"n\">xml_node</span> <span class=\"n\">subXmlNode</span> <span class=\"o\">=</span> <span class=\"n\">serviceXmlNode</span><span class=\"p\">.</span><span class=\"n\">first_child</span><span class=\"p\">();</span> <span class=\"n\">subXmlNode</span><span class=\"p\">;</span> <span class=\"n\">subXmlNode</span> <span class=\"o\">=</span> <span class=\"n\">subXmlNode</span><span class=\"p\">.</span><span class=\"n\">next_sibling</span><span class=\"p\">())</span>\n    <span class=\"p\">{</span>\n        <span class=\"k\">if</span> <span class=\"p\">(</span><span class=\"n\">std</span><span class=\"o\">::</span><span class=\"n\">string</span><span class=\"p\">(</span><span class=\"n\">STRING_XML_VEHICLE</span><span class=\"p\">)</span> <span class=\"o\">==</span> <span class=\"n\">subXmlNode</span><span class=\"p\">.</span><span class=\"n\">name</span><span class=\"p\">())</span>\n        <span class=\"p\">{</span>   \n            <span class=\"k\">if</span><span class=\"p\">(</span><span class=\"o\">!</span><span class=\"n\">subXmlNode</span><span class=\"p\">.</span><span class=\"n\">attribute</span><span class=\"p\">(</span><span class=\"n\">STRING_XML_ID</span><span class=\"p\">).</span><span class=\"n\">empty</span><span class=\"p\">()</span> <span class=\"o\">&amp;&amp;</span> <span class=\"o\">!</span><span class=\"n\">subXmlNode</span><span class=\"p\">.</span><span class=\"n\">attribute</span><span class=\"p\">(</span><span class=\"n\">STRING_XML_LEVEL</span><span class=\"p\">).</span><span class=\"n\">empty</span><span class=\"p\">())</span> \n            <span class=\"p\">{</span>\n                <span class=\"kt\">int64_t</span> <span class=\"n\">vId</span> <span class=\"o\">=</span> <span class=\"n\">subXmlNode</span><span class=\"p\">.</span><span class=\"n\">attribute</span><span class=\"p\">(</span><span class=\"n\">STRING_XML_ID</span><span class=\"p\">).</span><span class=\"n\">as_int</span><span class=\"p\">();</span>\n                <span class=\"kt\">int64_t</span> <span class=\"n\">reportLevel</span> <span class=\"o\">=</span> <span class=\"n\">subXmlNode</span><span class=\"p\">.</span><span class=\"n\">attribute</span><span class=\"p\">(</span><span class=\"n\">STRING_XML_LEVEL</span><span class=\"p\">).</span><span class=\"n\">as_int</span><span class=\"p\">();</span>\n                <span class=\"n\">m_idToLevel</span><span class=\"p\">[</span><span class=\"n\">vId</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"n\">reportLevel</span><span class=\"p\">;</span>\n            <span class=\"p\">}</span>\n            <span class=\"k\">else</span>\n            <span class=\"p\">{</span>\n                <span class=\"n\">UXAS_LOG_ERROR</span><span class=\"p\">(</span><span class=\"n\">s_typeName</span><span class=\"p\">(),</span> <span class=\"s\">\"::configure encountered \"</span><span class=\"p\">,</span> <span class=\"n\">STRING_XML_VEHICLE</span><span class=\"p\">,</span> \n                <span class=\"s\">\" element with missing attribute \"</span><span class=\"p\">,</span> <span class=\"n\">STRING_XML_ID</span><span class=\"p\">,</span> <span class=\"s\">\" or \"</span><span class=\"p\">,</span> <span class=\"n\">STRING_XML_LEVEL</span><span class=\"p\">);</span>\n                <span class=\"n\">isSuccess</span> <span class=\"o\">=</span> <span class=\"nb\">false</span><span class=\"p\">;</span>\n            <span class=\"p\">}</span>\n        <span class=\"p\">}</span>\n        <span class=\"k\">else</span>\n        <span class=\"p\">{</span>\n            <span class=\"n\">UXAS_LOG_ERROR</span><span class=\"p\">(</span><span class=\"n\">s_typeName</span><span class=\"p\">(),</span> <span class=\"s\">\"::configure encountered unknown element \"</span><span class=\"p\">,</span> <span class=\"n\">subXmlNode</span><span class=\"p\">.</span><span class=\"n\">name</span><span class=\"p\">());</span>\n            <span class=\"n\">isSuccess</span> <span class=\"o\">=</span> <span class=\"nb\">false</span><span class=\"p\">;</span>\n        <span class=\"p\">}</span>\n    <span class=\"p\">}</span>\n\n    <span class=\"n\">addSubscriptionAddress</span><span class=\"p\">(</span><span class=\"n\">afrl</span><span class=\"o\">::</span><span class=\"n\">cmasi</span><span class=\"o\">::</span><span class=\"n\">AirVehicleState</span><span class=\"o\">::</span><span class=\"n\">Subscription</span><span class=\"p\">);</span>\n\n    <span class=\"k\">return</span> <span class=\"p\">(</span><span class=\"n\">isSuccess</span><span class=\"p\">);</span>\n<span class=\"p\">}</span>\n\n<span class=\"kt\">bool</span> <span class=\"n\">JsonAirVehicleLoggerService</span><span class=\"o\">::</span><span class=\"n\">initialize</span><span class=\"p\">()</span>\n<span class=\"p\">{</span>\n    <span class=\"n\">std</span><span class=\"o\">::</span><span class=\"n\">cout</span> <span class=\"o\">&lt;&lt;</span> <span class=\"s\">\"*** INITIALIZING:: Service[\"</span> <span class=\"o\">&lt;&lt;</span> <span class=\"n\">s_typeName</span><span class=\"p\">()</span> <span class=\"o\">&lt;&lt;</span> <span class=\"s\">\"] Service Id[\"</span> <span class=\"o\">&lt;&lt;</span> <span class=\"n\">m_serviceId</span> \n              <span class=\"o\">&lt;&lt;</span> <span class=\"s\">\"] with working directory [\"</span> <span class=\"o\">&lt;&lt;</span> <span class=\"n\">m_workDirectoryName</span> <span class=\"o\">&lt;&lt;</span> <span class=\"s\">\"] *** \"</span> <span class=\"o\">&lt;&lt;</span> <span class=\"n\">std</span><span class=\"o\">::</span><span class=\"n\">endl</span><span class=\"p\">;</span>\n    \n    <span class=\"k\">return</span> <span class=\"p\">(</span><span class=\"nb\">true</span><span class=\"p\">);</span>\n<span class=\"p\">}</span>\n\n<span class=\"kt\">bool</span> <span class=\"n\">JsonAirVehicleLoggerService</span><span class=\"o\">::</span><span class=\"n\">start</span><span class=\"p\">()</span>\n<span class=\"p\">{</span>\n    <span class=\"n\">std</span><span class=\"o\">::</span><span class=\"n\">cout</span> <span class=\"o\">&lt;&lt;</span> <span class=\"s\">\"*** STARTING:: Service[\"</span> <span class=\"o\">&lt;&lt;</span> <span class=\"n\">s_typeName</span><span class=\"p\">()</span> <span class=\"o\">&lt;&lt;</span> <span class=\"s\">\"] Service Id[\"</span> <span class=\"o\">&lt;&lt;</span> <span class=\"n\">m_serviceId</span> \n              <span class=\"o\">&lt;&lt;</span> <span class=\"s\">\"] with working directory [\"</span> <span class=\"o\">&lt;&lt;</span> <span class=\"n\">m_workDirectoryName</span> <span class=\"o\">&lt;&lt;</span> <span class=\"s\">\"] *** \"</span> <span class=\"o\">&lt;&lt;</span> <span class=\"n\">std</span><span class=\"o\">::</span><span class=\"n\">endl</span><span class=\"p\">;</span>\n    \n    <span class=\"c1\">// Remove any existing contents of the output file on service start</span>\n    <span class=\"n\">std</span><span class=\"o\">::</span><span class=\"n\">ofstream</span> <span class=\"n\">file</span><span class=\"p\">(</span><span class=\"n\">m_workDirectoryPath</span> <span class=\"o\">+</span> <span class=\"n\">m_outputFilename</span><span class=\"p\">);</span>\n    <span class=\"n\">file</span> <span class=\"o\">&lt;&lt;</span> <span class=\"s\">\"\"</span><span class=\"p\">;</span>\n    <span class=\"n\">file</span><span class=\"p\">.</span><span class=\"n\">close</span><span class=\"p\">();</span>\n\n    <span class=\"k\">return</span> <span class=\"p\">(</span><span class=\"nb\">true</span><span class=\"p\">);</span>\n<span class=\"p\">};</span>\n\n<span class=\"kt\">bool</span> <span class=\"n\">JsonAirVehicleLoggerService</span><span class=\"o\">::</span><span class=\"n\">terminate</span><span class=\"p\">()</span>\n<span class=\"p\">{</span>\n    <span class=\"n\">std</span><span class=\"o\">::</span><span class=\"n\">cout</span> <span class=\"o\">&lt;&lt;</span> <span class=\"s\">\"*** TERMINATING:: Service[\"</span> <span class=\"o\">&lt;&lt;</span> <span class=\"n\">s_typeName</span><span class=\"p\">()</span> <span class=\"o\">&lt;&lt;</span> <span class=\"s\">\"] Service Id[\"</span> <span class=\"o\">&lt;&lt;</span> <span class=\"n\">m_serviceId</span> \n              <span class=\"o\">&lt;&lt;</span> <span class=\"s\">\"] with working directory [\"</span> <span class=\"o\">&lt;&lt;</span> <span class=\"n\">m_workDirectoryName</span> <span class=\"o\">&lt;&lt;</span> <span class=\"s\">\"] *** \"</span> <span class=\"o\">&lt;&lt;</span> <span class=\"n\">std</span><span class=\"o\">::</span><span class=\"n\">endl</span><span class=\"p\">;</span>\n    \n    <span class=\"k\">return</span> <span class=\"p\">(</span><span class=\"nb\">true</span><span class=\"p\">);</span>\n<span class=\"p\">}</span>\n\n<span class=\"kt\">bool</span> <span class=\"n\">JsonAirVehicleLoggerService</span><span class=\"o\">::</span>\n<span class=\"n\">processReceivedLmcpMessage</span><span class=\"p\">(</span><span class=\"n\">std</span><span class=\"o\">::</span><span class=\"n\">unique_ptr</span><span class=\"o\">&lt;</span><span class=\"n\">uxas</span><span class=\"o\">::</span><span class=\"n\">communications</span><span class=\"o\">::</span><span class=\"n\">data</span><span class=\"o\">::</span><span class=\"n\">LmcpMessage</span><span class=\"o\">&gt;</span> <span class=\"n\">receivedLmcpMessage</span><span class=\"p\">)</span>\n<span class=\"p\">{</span>\n    <span class=\"k\">if</span> <span class=\"p\">(</span><span class=\"n\">afrl</span><span class=\"o\">::</span><span class=\"n\">cmasi</span><span class=\"o\">::</span><span class=\"n\">isAirVehicleState</span><span class=\"p\">(</span><span class=\"n\">receivedLmcpMessage</span><span class=\"o\">-&gt;</span><span class=\"n\">m_object</span><span class=\"p\">))</span>\n    <span class=\"p\">{</span>\n        <span class=\"k\">auto</span> <span class=\"n\">avState</span> <span class=\"o\">=</span> <span class=\"n\">std</span><span class=\"o\">::</span><span class=\"n\">static_pointer_cast</span><span class=\"o\">&lt;</span><span class=\"n\">afrl</span><span class=\"o\">::</span><span class=\"n\">cmasi</span><span class=\"o\">::</span><span class=\"n\">AirVehicleState</span><span class=\"o\">&gt;</span> <span class=\"p\">(</span><span class=\"n\">receivedLmcpMessage</span><span class=\"o\">-&gt;</span><span class=\"n\">m_object</span><span class=\"p\">);</span>\n\n        <span class=\"c1\">// If the ID of an AirVehicleState message corresponds to a configured ID and</span>\n        <span class=\"c1\">// has not been seen before, store the ID and publish a corresponding KeyValuePair</span>\n        <span class=\"k\">if</span> <span class=\"p\">(</span><span class=\"n\">m_idToLevel</span><span class=\"p\">.</span><span class=\"n\">count</span><span class=\"p\">(</span><span class=\"n\">avState</span><span class=\"o\">-&gt;</span><span class=\"n\">getID</span><span class=\"p\">())</span> <span class=\"o\">&amp;&amp;</span> <span class=\"o\">!</span><span class=\"n\">m_seenIds</span><span class=\"p\">.</span><span class=\"n\">count</span><span class=\"p\">(</span><span class=\"n\">avState</span><span class=\"o\">-&gt;</span><span class=\"n\">getID</span><span class=\"p\">()))</span>\n        <span class=\"p\">{</span>\n            <span class=\"n\">m_seenIds</span><span class=\"p\">.</span><span class=\"n\">insert</span><span class=\"p\">(</span><span class=\"n\">avState</span><span class=\"o\">-&gt;</span><span class=\"n\">getID</span><span class=\"p\">());</span>\n            <span class=\"k\">auto</span> <span class=\"n\">kvp</span> <span class=\"o\">=</span> <span class=\"n\">std</span><span class=\"o\">::</span><span class=\"n\">make_shared</span><span class=\"o\">&lt;</span><span class=\"n\">afrl</span><span class=\"o\">::</span><span class=\"n\">cmasi</span><span class=\"o\">::</span><span class=\"n\">KeyValuePair</span><span class=\"o\">&gt;</span><span class=\"p\">();</span>\n            <span class=\"n\">kvp</span><span class=\"o\">-&gt;</span><span class=\"n\">setKey</span><span class=\"p\">(</span><span class=\"n\">std</span><span class=\"o\">::</span><span class=\"n\">string</span><span class=\"p\">(</span><span class=\"s\">\"JsonAirVehicleLoggerVehicleID\"</span><span class=\"p\">));</span>\n            <span class=\"n\">kvp</span><span class=\"o\">-&gt;</span><span class=\"n\">setValue</span><span class=\"p\">(</span><span class=\"n\">std</span><span class=\"o\">::</span><span class=\"n\">to_string</span><span class=\"p\">(</span><span class=\"n\">avState</span><span class=\"o\">-&gt;</span><span class=\"n\">getID</span><span class=\"p\">()));</span>\n            <span class=\"n\">sendSharedLmcpObjectBroadcastMessage</span><span class=\"p\">(</span><span class=\"n\">kvp</span><span class=\"p\">);</span>\n        <span class=\"p\">}</span>\n\n        <span class=\"c1\">// If the ID was listed in the configuration element, save a JSON message </span>\n        <span class=\"c1\">// with content according to the configured Level for that ID</span>\n        <span class=\"k\">if</span> <span class=\"p\">(</span><span class=\"n\">m_idToLevel</span><span class=\"p\">.</span><span class=\"n\">count</span><span class=\"p\">(</span><span class=\"n\">avState</span><span class=\"o\">-&gt;</span><span class=\"n\">getID</span><span class=\"p\">()))</span> \n        <span class=\"p\">{</span>\n            <span class=\"n\">nlohmann</span><span class=\"o\">::</span><span class=\"n\">json</span> <span class=\"n\">j</span><span class=\"p\">;</span>\n            <span class=\"n\">j</span><span class=\"p\">[</span><span class=\"s\">\"ID\"</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"n\">avState</span><span class=\"o\">-&gt;</span><span class=\"n\">getID</span><span class=\"p\">();</span>\n            <span class=\"n\">j</span><span class=\"p\">[</span><span class=\"s\">\"Time\"</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"n\">avState</span><span class=\"o\">-&gt;</span><span class=\"n\">getTime</span><span class=\"p\">();</span>\n            <span class=\"n\">j</span><span class=\"p\">[</span><span class=\"s\">\"Latitude\"</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"n\">avState</span><span class=\"o\">-&gt;</span><span class=\"n\">getLocation</span><span class=\"p\">()</span><span class=\"o\">-&gt;</span><span class=\"n\">getLatitude</span><span class=\"p\">();</span>\n            <span class=\"n\">j</span><span class=\"p\">[</span><span class=\"s\">\"Longitude\"</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"n\">avState</span><span class=\"o\">-&gt;</span><span class=\"n\">getLocation</span><span class=\"p\">()</span><span class=\"o\">-&gt;</span><span class=\"n\">getLongitude</span><span class=\"p\">();</span>\n\n            <span class=\"k\">if</span> <span class=\"p\">(</span><span class=\"n\">m_idToLevel</span><span class=\"p\">[</span><span class=\"n\">avState</span><span class=\"o\">-&gt;</span><span class=\"n\">getID</span><span class=\"p\">()]</span> <span class=\"o\">&gt;</span> <span class=\"mi\">0</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n                <span class=\"n\">j</span><span class=\"p\">[</span><span class=\"s\">\"Heading\"</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"n\">avState</span><span class=\"o\">-&gt;</span><span class=\"n\">getHeading</span><span class=\"p\">();</span>\n                <span class=\"n\">j</span><span class=\"p\">[</span><span class=\"s\">\"Groundspeed\"</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"n\">avState</span><span class=\"o\">-&gt;</span><span class=\"n\">getGroundspeed</span><span class=\"p\">();</span>\n                <span class=\"n\">j</span><span class=\"p\">[</span><span class=\"s\">\"Airspeed\"</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"n\">avState</span><span class=\"o\">-&gt;</span><span class=\"n\">getAirspeed</span><span class=\"p\">();</span>\n                <span class=\"n\">j</span><span class=\"p\">[</span><span class=\"s\">\"VerticalSpeed\"</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"n\">avState</span><span class=\"o\">-&gt;</span><span class=\"n\">getVerticalSpeed</span><span class=\"p\">();</span>\n            <span class=\"p\">}</span>\n\n            <span class=\"k\">if</span> <span class=\"p\">(</span><span class=\"n\">m_idToLevel</span><span class=\"p\">[</span><span class=\"n\">avState</span><span class=\"o\">-&gt;</span><span class=\"n\">getID</span><span class=\"p\">()]</span> <span class=\"o\">&gt;</span> <span class=\"mi\">1</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n                <span class=\"n\">j</span><span class=\"p\">[</span><span class=\"s\">\"EnergyAvailable\"</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"n\">avState</span><span class=\"o\">-&gt;</span><span class=\"n\">getEnergyAvailable</span><span class=\"p\">();</span>\n                <span class=\"n\">j</span><span class=\"p\">[</span><span class=\"s\">\"ActualEnergyRate\"</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"n\">avState</span><span class=\"o\">-&gt;</span><span class=\"n\">getActualEnergyRate</span><span class=\"p\">();</span>\n            <span class=\"p\">}</span>\n\n            <span class=\"n\">std</span><span class=\"o\">::</span><span class=\"n\">ofstream</span> <span class=\"n\">file</span><span class=\"p\">(</span><span class=\"n\">m_workDirectoryPath</span> <span class=\"o\">+</span> <span class=\"n\">m_outputFilename</span><span class=\"p\">,</span> <span class=\"n\">std</span><span class=\"o\">::</span><span class=\"n\">ios</span><span class=\"o\">::</span><span class=\"n\">app</span><span class=\"p\">);</span>\n            <span class=\"n\">file</span> <span class=\"o\">&lt;&lt;</span> <span class=\"n\">j</span><span class=\"p\">.</span><span class=\"n\">dump</span><span class=\"p\">()</span> <span class=\"o\">&lt;&lt;</span> <span class=\"n\">std</span><span class=\"o\">::</span><span class=\"n\">endl</span><span class=\"p\">;</span>\n            <span class=\"n\">file</span><span class=\"p\">.</span><span class=\"n\">close</span><span class=\"p\">();</span>\n        <span class=\"p\">}</span>\n        \n    <span class=\"p\">}</span>\n    <span class=\"k\">return</span> <span class=\"nb\">false</span><span class=\"p\">;</span>\n<span class=\"p\">}</span>\n\n<span class=\"p\">};</span> <span class=\"c1\">//namespace data</span>\n<span class=\"p\">};</span> <span class=\"c1\">//namespace service</span>\n<span class=\"p\">};</span> <span class=\"c1\">//namespace uxas</span>\n</code></pre>  </div></div>\n\n<p>To write our service, we follow the steps above. Some things to take note of:</p>\n\n<ul>\n <li>For steps 1-3 we:\n <ul>\n <li>Replace <code class=\"language-plaintext highlighter-rouge\">00_ServiceTemplate</code> with <code class=\"language-plaintext highlighter-rouge\">JsonAirVehicleLoggerService</code></li>\n <li>Refine the namespace to <code class=\"language-plaintext highlighter-rouge\">uxas::service::data</code></li>\n </ul>\n </li>\n <li>For step 4 we do the following in the header file:\n <ul>\n <li>Change the header guard string <code class=\"language-plaintext highlighter-rouge\">UXAS_00_SERVICE_TEMPLATE_H</code> to <code class=\"language-plaintext highlighter-rouge\">UXAS_JSON_AIR_VEHICLE_LOGGER_SERVICE_H</code></li>\n <li>Update function <code class=\"language-plaintext highlighter-rouge\">s_directoryName()</code> to return <code class=\"language-plaintext highlighter-rouge\">\"JsonAirVehicleLogs\"</code></li>\n <li>Include a header <code class=\"language-plaintext highlighter-rouge\">nlohmann/json.hpp</code> for a 3rd party dependency for working with JSON</li>\n <li>Declare private member variables <code class=\"language-plaintext highlighter-rouge\">m_outputFilename</code> (with default value <code class=\"language-plaintext highlighter-rouge\">\"output.txt\"</code>), <code class=\"language-plaintext highlighter-rouge\">m_idToLevelMap</code>, and <code class=\"language-plaintext highlighter-rouge\">m_seenVehicleSet</code> that will be used in the source file</li>\n <li>Update the main doxygen-compatible comment block at the top, paying particular attention to the example configuration element, its options, and the lists of subscribed and sent messages</li>\n </ul>\n </li>\n <li>For step 5 we do the following in the source file:\n <ul>\n <li>Include headers for necessary messages: <code class=\"language-plaintext highlighter-rouge\">\"afrl/cmasi/KeyValuePair.h\"</code> and <code class=\"language-plaintext highlighter-rouge\">\"afrl/cmasi/AirVehicleState.h\"</code></li>\n <li>Include headers <code class=\"language-plaintext highlighter-rouge\">&lt;fstream&gt;</code> and <code class=\"language-plaintext highlighter-rouge\">&lt;string&gt;</code></li>\n <li>Update the logic of function <code class=\"language-plaintext highlighter-rouge\">configure</code> to process an XML configuration element of the form given in the main comment block of the header\n <ul>\n <li>(Optional convention) Define macros for configuration element and attribute strings</li>\n <li>Save configuration parameters to <code class=\"language-plaintext highlighter-rouge\">m_outputFilename</code> (if applicable) and <code class=\"language-plaintext highlighter-rouge\">m_idToLevel</code></li>\n <li>Log errors and set <code class=\"language-plaintext highlighter-rouge\">isSuccess = False</code> if the configuration element is invalid</li>\n </ul>\n </li>\n <li>Update the logic of function <code class=\"language-plaintext highlighter-rouge\">processReceivedLmcpMessage</code> to process <code class=\"language-plaintext highlighter-rouge\">AirVehicleState</code> messages\n <ul>\n <li>Output a <code class=\"language-plaintext highlighter-rouge\">KeyValuePair</code> of the form (<code class=\"language-plaintext highlighter-rouge\">JsonAirVehicleLoggerVehicleID</code>,<code class=\"language-plaintext highlighter-rouge\">{ID}</code>) the first time an <code class=\"language-plaintext highlighter-rouge\">ID</code> number corresponding to an <code class=\"language-plaintext highlighter-rouge\">AirVehicle</code> configuration element is seen</li>\n <li>Construct and save a JSON-formatted message to the configured output file with content depending on the <code class=\"language-plaintext highlighter-rouge\">Level</code> of the <code class=\"language-plaintext highlighter-rouge\">AirVehicle</code> configuration element with the corresponding <code class=\"language-plaintext highlighter-rouge\">ID</code></li>\n </ul>\n </li>\n </ul>\n </li>\n</ul>\n\n<h2 id=\"compiling-the-example-c-service\">Compiling the example C++ service</h2>\n<p>(TBD)</p>\n\n<h2 id=\"running-the-example-c-service\">Running the example C++ service</h2>\n\n<p>By convention, OpenUxAS examples are placed in subdirectories within <code class=\"language-plaintext highlighter-rouge\">{UXAS_ROOT}/examples</code>. There is a template directory <code class=\"language-plaintext highlighter-rouge\">{UXAS_ROOT}/examples/00_Template</code> that contains the files needed to bootstrap many standard examples. Once you have recompiled OpenUxAS with the <code class=\"language-plaintext highlighter-rouge\">JsonAirVehicleLoggerService</code>, you can run this service as part of an example by performing the following steps within directory <code class=\"language-plaintext highlighter-rouge\">{UXAS_ROOT}/examples</code></p>\n<ol>\n <li>Copy subdirectory <code class=\"language-plaintext highlighter-rouge\">00_Template</code> to a new subdirectory <code class=\"language-plaintext highlighter-rouge\">{My_Example}</code></li>\n <li>Edit OpenUxAS configuration file <code class=\"language-plaintext highlighter-rouge\">{MyExample}/cfg_Template.xml</code> to include an XML configuration element for the service (the one in the header file’s main comment block will work)</li>\n <li>Run OpenUxAS with the modified configuration file and in conjunction with OpenAMASE in one of several ways\n <ul>\n <li>With the <code class=\"language-plaintext highlighter-rouge\">run-example</code> script from directory <code class=\"language-plaintext highlighter-rouge\">{UXAS_ROOT}</code> using command: <code class=\"language-plaintext highlighter-rouge\">./run-examples {My_Example}</code></li>\n <li>With shell scripts from directory <code class=\"language-plaintext highlighter-rouge\">{UXAS_ROOT}/examples/{My_Example}</code> using command: <code class=\"language-plaintext highlighter-rouge\">./runAMASE_Template.sh &amp; ./runUxAS_Template.sh</code></li>\n </ul>\n </li>\n <li>Press the Play button in the OpenAMASE simulation pane\n <ul>\n <li>In the OpenAMASE simulation, vehicles should start to move</li>\n <li>In the terminal, the OpenUxAS binary should output text, including “INITIALIZING” and “STARTING” messages from <code class=\"language-plaintext highlighter-rouge\">JsonAirVehicleLoggerService</code></li>\n </ul>\n </li>\n <li>After the simulation has run for at least a few seconds,\n <ul>\n <li>If you used the <code class=\"language-plaintext highlighter-rouge\">run-example</code> script, close the OpenAMASE GUI and the OpenUxAS process will terminate automatically</li>\n <li>If you used the shell scripts, close the OpenAMASE GUI and also kill the OpenUxAS process by pressing Ctrl+C in the terminal window</li>\n </ul>\n </li>\n <li>Examine the contents of <code class=\"language-plaintext highlighter-rouge\">{UXAS_ROOT}/examples/{My_Example}/RUNDIR_Template/datawork</code>\n <ul>\n <li>Subdirectory <code class=\"language-plaintext highlighter-rouge\">JsonAirVehicleLogs</code> should contain an output file with JSON-formatted messages</li>\n <li>Subdirectory <code class=\"language-plaintext highlighter-rouge\">SavedMessages</code> should contain a SQL file <code class=\"language-plaintext highlighter-rouge\">messageLog_1_0.db3</code> that contains the <code class=\"language-plaintext highlighter-rouge\">KeyValuePair</code> messages published by <code class=\"language-plaintext highlighter-rouge\">JsonAirVehicleLoggerService</code></li>\n </ul>\n </li>\n</ol>\n\n","dir":"/tutorials/addingServices/","name":"addGeneralCppService.md","path":"tutorials/addingServices/addGeneralCppService.md","url":"/tutorials/addingServices/addGeneralCppService.html"},{"sort":1,"permalink":"/documentation/","layout":"default","title":"Documentation","content":"<h1 id=\"documentation\">Documentation</h1>\n\n<ul>\n <li><a href=\"/documentation/contributing.html\">Contributing</a></li>\n <li><a href=\"/documentation/installation.html\">Installation</a></li>\n <li><a href=\"/documentation/introduction.html\">Introduction</a></li>\n <li><a href=\"/documentation/supportingSoftware.html\">Supporting Software</a></li>\n</ul>\n","dir":"/documentation/","name":"README.md","path":"documentation/README.md","url":"/documentation/"},{"sort":1,"permalink":"/tutorials/addingServices/","layout":"default","title":"Creating services","content":"<h1 id=\"creating-services\">Creating services</h1>\n\n<p>UxAS is a configurable collection of services that interact with other services through a publish-subscribe message passing architecture. In other words, a UxAS service subscribes to particular types of messages, and it automatically receives messages of those types when other services publish them. When a service receives a subscribed message, it performs some action based on the type and content of the message and usually publishes a message in response.</p>\n\n<p>There are two categories of services in UxAS: task services and general (non-task) services. Task services have a specific sequence of messages that they should receive and send in order to correctly interact with other key services in UxAS. General services do not.</p>\n\n<p>Let’s start by considering how to add a general service to UxAS. Since UxAS is written in C++, let’s start by considering a general service in C++.</p>\n","dir":"/tutorials/addingServices/","name":"README.md","path":"tutorials/addingServices/README.md","url":"/tutorials/addingServices/"},{"sort":2,"permalink":"/tutorials/","layout":"default","title":"Tutorials","content":"<h1 id=\"tutorials\">Tutorials</h1>\n\n<ul>\n <li><a href=\"/tutorials/addingServices/\">Creating services</a>\n <ul>\n <li><a href=\"/tutorials/addingServices/addGeneralCppService.html\">Creating a general service in C++</a></li>\n </ul>\n </li>\n <li><a href=\"/tutorials/creatingExamples/\">Creating Examples</a></li>\n</ul>\n","dir":"/tutorials/","name":"README.md","path":"tutorials/README.md","url":"/tutorials/"},{"sort":2,"permalink":"/tutorials/creatingExamples/","layout":"default","title":"Creating Examples","content":"<h1 id=\"creating-examples\">Creating Examples</h1>\n\n","dir":"/tutorials/creatingExamples/","name":"README.md","path":"tutorials/creatingExamples/README.md","url":"/tutorials/creatingExamples/"}]